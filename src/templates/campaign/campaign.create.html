<div class="col-sm-12">
    <button class="btn btn-primary btn-sm" ng-back><i
            class="fa fa-arrow-left fa-lg"></i> Back
    </button>
</div>
<br><br>
<div class="col-sm-12">
    <div class="panel profile-panel animated zoomIn">
        <div class="panel-body">
            <wizard on-finish="finishedWizard()" on-cancel="cancelledWizard()">
                <wz-step wz-title="Basic" canexit="exitValidation">
                    <h3>Add New</h3>
                    <p>Please fill the below form to start.</p>
                    <form name="newCampaign.form1" class="animated fadeIn" novalidate>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group has-feedback"
                                     ng-class="{'has-error': newCampaign.form1.name.$invalid && (newCampaign.form1.name.$dirty || newCampaign.form1.$submitted)}">
                                    <label for="name">Campaign Title <span class="note-text">*</span></label>
                                    <input type="text" class="form-control" id="name"
                                           name="name" placeholder="Campaign Title"
                                           ng-model="newCampaign.info.name" required>
                                    <span class="help-block error-block basic-block"
                                          ng-if="newCampaign.form1.name.$invalid && newCampaign.form1.name.$dirty">Required</span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group"
                                     ng-class="{'has-error': newCampaign.form1.subType.$invalid && (newCampaign.form1.subType.$dirty || newCampaign.form1.$submitted)}">
                                    <label for="subType">Select Sub Type <span
                                            class="note-text">*</span></label>
                                    <select style="font-weight: 600;color: #999999;" class="form-control"
                                            ng-model="selected.subType" placeholder="Select Sub Type"
                                            name="subType" id="subType" ng-required="true"
                                            ng-options="item as item.label for item in CampaignSubTypeListt" required>
                                        <option value="">Select Sub Type</option>
                                    </select>
                                    <span class="help-block error-block basic-block"
                                          ng-if="newCampaign.form1.subType.$invalid && newCampaign.form1.subType.$dirty">Select sub type is required field</span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group"
                                     ng-class="{'has-error': newCampaign.form1.startDate.$invalid && (newCampaign.form1.startDate.$dirty || newCampaign.form1.$submitted)}">
                                    <label for="startDate">Start Date<span
                                            class="note-text"> * </span></label>
                                    <p class="input-group">
                                        <input type="text" class="form-control" uib-datepicker-popup="{{format}}"
                                               ng-model="newCampaign.info.startDate" is-open="popup1.opened"
                                               placeholder="Start Date" id="startDate"
                                               datepicker-options="dateOptions" ng-required="true" close-text="Close"
                                               alt-input-formats="altInputFormats" name="startDate"/>
                                        <span class="input-group-btn assignTemplateLayout">
                                            <button type="button" class="btn btn-default" ng-click="open1()">
                                                <i class="glyphicon glyphicon-calendar"></i></button>
                                        </span></p>
                                    <span class="help-block error-block basic-block"
                                          ng-if="newCampaign.form1.startDate.$invalid && newCampaign.form1.startDate.$dirty">Date Required</span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group"
                                     ng-class="{'has-error': newCampaign.form1.endDate.$invalid && (newCampaign.form1.endDate.$dirty || newCampaign.form1.$submitted)}">
                                    <label for="endDate">End Date<span
                                            class="note-text"> * </span></label>
                                    <p class="input-group">
                                        <input type="text" class="form-control" uib-datepicker-popup="{{format}}"
                                               ng-model="newCampaign.info.endDate" is-open="popup2.opened"
                                               placeholder="End Date" id="endDate"
                                               datepicker-options="dateOptions" ng-required="true" close-text="Close"
                                               alt-input-formats="altInputFormats" name="fromDate"/>
                                        <span class="input-group-btn assignTemplateLayout">
                                            <button type="button" class="btn btn-default" ng-click="open2()">
                                                <i class="glyphicon glyphicon-calendar"></i></button>
                                        </span></p>
                                    <span class="help-block error-block basic-block"
                                          ng-if="newCampaign.form1.endDate.$invalid && newCampaign.form1.endDate.$dirty">Date Required</span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group"
                                     ng-class="{'has-error': newCampaign.form1.closeMessage.$invalid && (newCampaign.form1.closeMessage.$dirty || newCampaign.form1.$submitted)}">
                                    <label for="emailTemplate">Close Message <span class="note-text">*</span></label>
                                    <!--  <i class="fa fa-info-circle template-info cursor pull-right fa-lg"
                                         ng-click="openPlaceHolderInfoBox1(true,false)"
                                         aria-hidden="true"></i>-->
                                    <span class="text-count pull-right">{{newCampaign.info.closeMessage.length +"/"+600}}</span>
                                    <textarea class="form-control" name="closeMessage" id="emailTemplate"
                                              placeholder="Close message" rows="2" maxlength="600"
                                              ng-model="newCampaign.info.closeMessage" required>
                                  </textarea>
                                    <span class="help-block error-block basic-block"
                                          ng-if="newCampaign.form1.closeMessage.$invalid && newCampaign.form1.closeMessage.$dirty">Required</span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group"
                                     ng-class="{'has-error': newCampaign.form1.smsTemplate.$invalid && (newCampaign.form1.smsTemplate.$dirty || newCampaign.form1.$submitted)}">
                                    <label for="smsTemplate">Sms Template <span class="note-text">*</span></label>
                                    <!-- <i class="fa fa-info-circle template-info cursor pull-right fa-lg"
                                        ng-click="openPlaceHolderInfoBox1(false,true)"
                                        aria-hidden="true"></i>-->
                                    <span class="text-count pull-right">{{newCampaign.info.smsTemplate.length +"/"+160}}</span>
                                    <textarea class="form-control" name="smsTemplate" id="smsTemplate"
                                              placeholder="SMS template" rows="2" maxlength="160"
                                              ng-model="newPromoCampaign.info.smsTemplate" required>
                                </textarea>
                                    <span class="help-block error-block basic-block"
                                          ng-if="newCampaign.form1.smsTemplate.$invalid && newCampaign.form1.smsTemplate.$dirty">Required</span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="mobileCsv">Upload Mobile Csv <span
                                            class="non-mandatory">(Optional)</span></label>
                                    <!--   <i class="fa fa-info-circle template-info cursor pull-right fa-lg"
                                          ng-click="csvInstruction(false,true)"
                                          aria-hidden="true"></i>-->
                                    <input class="form-control" type="file" id="mobileCsv"
                                           ngf-select="uploadMobileCsv($file)"
                                           ng-model="upload.mobileCsv" ngf-pattern="'.csv'" accept=".csv"
                                           ngf-max-size="5MB"
                                           name="mobileCsv">
                                    <!--<a ng-if="newCampaign.info.mobileCsv!=undefined"
                                       class=" animated fadeIn headerFileLabel help-block"
                                       href="{{'../uploads/' + newCampaign.info.mobileCsv }}"
                                       target="_blank"
                                       download><i class="fa fa-eye" aria-hidden="true"></i>
                                        {{newCampaign.info.mobileCsv }}</a>-->
                                </div>
                            </div>
                        </div>
                    </form>
                    <div class="row">
                        <div class="col-md-12">
                            <input class="btn btn-sm btn-info" type="submit"
                                   wz-next value="Next"/>
                        </div>
                    </div>
                    <!--  ng-disabled="newCampaign.form1.$invalid"-->
                </wz-step>
                <wz-step wz-title="Questionnaire" canenter="enterValidation">
                    <h3>Add Survey Questionnaire</h3>
                    <p>You can add new Question or use from previous campaign!</p>
                    <input class="btn btn-sm btn-default" type="button" wz-previous="logStep()" value="Previous"/>
                    <input class="btn btn-sm btn-info" type="submit" wz-next value="Next"/>
                </wz-step>
                <wz-step wz-title="Configuration" canenter="enterValidation">
                    <h3>Configuration</h3>
                    <p>Please add voucher details!</p>
                    <form name="newCampaign.form3" class="animated fadeIn" novalidate>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group has-feedback"
                                     ng-class="{'has-error': newCampaign.form3.name.$invalid && (newCampaign.form3.name.$dirty || newCampaign.form3.$submitted)}">
                                    <label for="name">Header Title <span class="note-text">*</span></label>
                                    <input type="text" class="form-control" id="headerName"
                                           name="name" placeholder="Header Title"
                                           ng-model="newCampaign.info.name" required>
                                    <span class="help-block error-block basic-block"
                                          ng-if="loginForm.username.$invalid && loginForm.username.$dirty">Required</span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="desc">Description <span class="non-mandatory">(Optional)</span></label>
                                    <input type="text" class="form-control" id="desc"
                                           name="desc" placeholder="Description"
                                           ng-model="newCampaign.info.desc">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="row">
                                <div class="col-md-12" style="margin-bottom: -15px">
                                    <label>Header Settings<span class="note-text"> * </span></label>
                                </div>
                            </div>
                            <div ng-repeat="item in newCampaign.info.headerTemplate track by $index">
                                <div class="row">
                                    <div class="form-group col-md-2 col-xs-6">
                                        <input type="text" name="noOfAdult" id="noOfAdult"
                                               class="form-control"
                                               ng-model="newMenu.info.headerTemplate[$index].noOfAdult"
                                               placeholder="No of Adult*">
                                    </div>
                                    <div class="form-group col-md-2 col-xs-6">
                                        <input type="text" name="voucherId" id="voucherId"
                                               class="form-control"
                                               ng-model="newMenu.info.headerTemplate[$index].voucherId"
                                               placeholder="Voucher Code *">
                                    </div>
                                    <div class="form-group col-md-4 col-xs-6">
                                        <input type="text" name="columnLabel" id="columnLabel"
                                               class="form-control"
                                               ng-model="newMenu.info.headerTemplate[$index].columnLabel"
                                               placeholder="When 5 people dined*">
                                    </div>
                                    <div class="form-group col-md-2 col-xs-6">
                                        <input type="text" name="voucherLabel" id="voucherLabel"
                                               class="form-control"
                                               ng-model="newMenu.info.headerTemplate[$index].voucherLabel"
                                               placeholder="Rs. 500/-* off">
                                    </div>
                                    <div class="form-group col-md-1 col-xs-6">
                                        <button type="button" class="btn btn-info pull-left"
                                                ng-click="addRow($index)"
                                                ng-show="$last">
                                            <i class="fa fa-plus"> Add</i>
                                        </button>
                                    </div>
                                    <div class="form-group col-md-1 col-xs-6">
                                        <button type="button" class="btn btn-danger"
                                                ng-click="deleteRow($event,$index)" value=""
                                                ng-show="$index != 0">
                                            <i class="fa fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <div class="row">
                        <div class="col-md-12">
                            <input class="btn btn-sm btn-default" type="button" wz-previous="logStep()" value="Previous"/>
                            <input class="btn btn-sm btn-info" type="submit" wz-next value="Next"/>
                        </div>
                    </div>
                </wz-step>
                <wz-step wz-title="Final">
                    <p></p>
                    <input class="btn btn-sm btn-default" type="button" wz-previous="logStep()" value="Previous"/>
                    <input class="btn btn-sm btn-info" type="submit" wz-next value="Submit"/>
                </wz-step>
            </wizard>
        </div>
    </div>
</div>

